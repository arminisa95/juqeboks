<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>JUKE</title>

    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/musicplayer.css">
    <link rel="stylesheet" href="css/feed.css">
    <link rel="stylesheet" href="css/koleqtion.css">
    <link rel="stylesheet" href="css/lists.css">
    <link rel="stylesheet" href="css/disqo.css">
    <link rel="stylesheet" href="css/upload.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/media-editor.css">
    <link rel="stylesheet" href="css/mobile.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script src="js/api-base.js"></script>
    <script src="js/media-editor.js"></script>
    <script src="js/player.js" defer></script>
    <script src="js/auth.js" defer></script>
    <script src="js/api.js" defer></script>
    <script src="js/lists.js" defer></script>
    <script src="js/uploadPage.js" defer></script>
    <script src="js/spa.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:ital,opsz,wght@0,17..18,400..700;1,17..18,400..700&family=Honk:MORF@15&family=Kedebideri:wght@400;500;600;700;800;900&family=Sigmar&display=swap" rel="stylesheet">
</head>
<body data-spa="true">
    <header>
        <a href="#/feed">
            <img src="images/juqe.png" alt="Juke Logo" class="logo-img">
        </a>

        <nav>
            <div class="nav-buttons">
                <a href="#/feed" class="feed">_feed</a>
                <a href="#/lists" class="artists">_lists</a>
                <a href="#/disqo" class="lists">_disqo</a>
            </div>
            <div class="search-container">
                <input type="text" class="search-bar" placeholder="Search for music, artists...">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>
            <div class="header-right">
                <div class="nav-buttons">
                    <a href="analytics-dashboard.html" class="app" target="_blank">_fair</a>
                    <a href="#/upload" class="app">_uqload</a>
                    <a href="#/koleqtion" class="register">_koleqtion</a>
                    <a href="#/login" class="login auth-login">_U</a>
                    <a href="#/profile" class="login auth-user" style="display:none;">_U</a>
                </div>
            </div>
        </nav>
    </header>

    <template id="tpl-feed">
        <section class="music-feed">
            <div class="feed-container">
                <h1 class="feed-title" style="display:none;">Feed</h1>
                <div class="music-grid"></div>
            </div>
        </section>
    </template>

    <template id="tpl-disqo">
        <section class="music-feed">
            <div class="disqo-container">
                <div class="disqo-featured" id="disqoFeatured"></div>
                
                <div class="disqo-section">
                    <div class="disqo-section-header">
                        <h2 class="disqo-section-title">Browse by Genre</h2>
                    </div>
                    <div class="genre-grid" id="genreGrid">
                        <div class="genre-card" data-genre="electronic">
                            <div class="genre-card-title">Electronic</div>
                        </div>
                        <div class="genre-card" data-genre="hiphop">
                            <div class="genre-card-title">Hip Hop</div>
                        </div>
                        <div class="genre-card" data-genre="rock">
                            <div class="genre-card-title">Rock</div>
                        </div>
                        <div class="genre-card" data-genre="pop">
                            <div class="genre-card-title">Pop</div>
                        </div>
                        <div class="genre-card" data-genre="jazz">
                            <div class="genre-card-title">Jazz</div>
                        </div>
                        <div class="genre-card" data-genre="rnb">
                            <div class="genre-card-title">R&B</div>
                        </div>
                    </div>
                </div>
                
                <div class="disqo-section">
                    <div class="disqo-section-header">
                        <h2 class="disqo-section-title">Made For You</h2>
                        <a href="#" class="disqo-section-link">See all</a>
                    </div>
                    <div class="recommendations-row" id="recommendationsRow"></div>
                </div>
                
                <div class="disqo-section">
                    <div class="disqo-section-header">
                        <h2 class="disqo-section-title">New Releases</h2>
                        <a href="#" class="disqo-section-link">See all</a>
                    </div>
                    <div class="album-grid" id="newReleasesGrid"></div>
                </div>
            </div>
        </section>
    </template>

    <template id="tpl-koleqtion">
        <main>
            <div class="library-container">
                <aside class="library-nav" aria-label="Library directories">
                    <div class="library-nav-title">_koleqtion</div>
                    <div class="library-nav-subtitle">Your Library</div>
                    <div class="library-nav-items" role="tablist">
                        <button class="library-nav-item active" type="button" role="tab" data-view="tracks">_tracks</button>
                        <button class="library-nav-item" type="button" role="tab" data-view="playlists">_playlists</button>
                        <button class="library-nav-item" type="button" role="tab" data-view="albums">_albums</button>
                    </div>
                    <div class="library-nav-footer">Switch with ↑/↓, open with Enter</div>
                </aside>

                <section class="library-content" aria-label="Library content">
                    <div class="library-panel active" id="libraryPanelTracks" data-panel="tracks" role="tabpanel">
                        <div class="library-panel-header">
                            <div class="library-panel-title">_tracks</div>
                            <div class="library-panel-hint">Your tracks</div>
                        </div>
                        <div class="tracks-grid" id="tracksGrid"></div>
                    </div>

                    <div class="library-panel" id="libraryPanelPlaylists" data-panel="playlists" role="tabpanel">
                        <div class="library-panel-header">
                            <div class="library-panel-title">_playlists</div>
                            <div class="library-panel-hint">Your playlists</div>
                        </div>
                        <div class="tracks-grid" id="playlistsGrid"></div>
                    </div>

                    <div class="library-panel" id="libraryPanelAlbums" data-panel="albums" role="tabpanel">
                        <div class="library-panel-header">
                            <div class="library-panel-title">_albums</div>
                            <div class="library-panel-hint">Your albums</div>
                        </div>
                        <div class="tracks-grid" id="albumsGrid"></div>
                    </div>
                </section>
            </div>
        </main>
    </template>

    <template id="tpl-lists">
        <main>
            <div class="lists-shell" id="listsShell">
                <aside class="lists-nav" aria-label="Lists directories">
                    <div class="lists-nav-title">
                        _lists
                        <button class="lists-add-btn" type="button" id="addPlaylistBtn" aria-label="Add playlist">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="lists-nav-subtitle">Directories</div>
                    <div class="lists-nav-items" role="tablist">
                        <button class="lists-nav-item" type="button" role="tab" data-view="liked">_liked tracks</button>
                        <button class="lists-nav-item" type="button" role="tab" data-view="liked-playlists">_liked playlists</button>
                    </div>
                    <div class="lists-nav-footer">Switch with ↑/↓, open with Enter</div>
                </aside>

                <section class="lists-content" aria-label="Lists content">
                    <div class="lists-panel" id="listsPanelLiked" data-panel="liked" role="tabpanel">
                        <div class="lists-panel-header">
                            <div class="lists-panel-title">_liked tracks</div>
                            <div class="lists-panel-hint">Your liked tracks</div>
                        </div>
                        <div id="likedTracks" class="cards-grid"></div>
                    </div>

                    <div class="lists-panel" id="listsPanelLikedPlaylists" data-panel="liked-playlists" role="tabpanel">
                        <div class="lists-panel-header">
                            <div class="lists-panel-title">_liked playlists</div>
                            <div class="lists-panel-hint">Your liked playlists</div>
                        </div>
                        <div id="likedPlaylists" class="cards-grid"></div>
                    </div>

                    <div class="lists-panel" id="listsPanelLists" data-panel="lists" role="tabpanel">
                        <div class="lists-panel-header">
                            <div class="lists-panel-title">_lists</div>
                            <div class="lists-panel-hint">Your playlists</div>
                        </div>
                        <div id="myPlaylists" class="cards-grid"></div>
                    </div>

                    <div class="lists-panel" id="listsPanelPlaylist" data-panel="playlist" role="tabpanel" style="display:none;">
                        <div class="lists-panel-header">
                            <button class="lists-back" type="button" id="playlistBack">Back</button>
                            <div class="lists-panel-title" id="playlistTitle">Playlist</div>
                            <div class="lists-panel-hint" id="playlistStatus"></div>
                        </div>
                        <div id="playlistTracks" class="lists-tracklist"></div>
                    </div>
                </section>
            </div>
        </main>
    </template>

    <template id="tpl-upload">
        <main>
            <div class="upload-container">
                <div class="upload-header">
                    <h1>Upload Your Music</h1>
                    <p>Share your sound with the world</p>
                </div>

                <form id="uploadForm">
                    <div class="upload-area" id="dropZone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag & drop your audio files here or</p>
                        <p><span class="browse-link">browse</span> your files</p>
                        <input type="file" id="fileInput" accept="audio/*" style="display: none;" multiple>
                        <div class="file-info" id="fileInfo">No files selected</div>
                    </div>

                    <div class="form-group">
                        <label for="coverInput">Cover Image (optional)</label>
                        <input type="file" id="coverInput" class="form-control" accept="image/*">
                        <div class="file-info" id="coverInfo">No cover selected</div>
                    </div>

                    <div class="form-group">
                        <label for="videoInput"><i class="fas fa-video"></i> Music Video (optional)</label>
                        <input type="file" id="videoInput" class="form-control" accept="video/*">
                        <div class="file-info" id="videoInfo">No video selected</div>
                        <small style="color: rgba(255,255,255,0.5);">Add a music video to play alongside your track</small>
                    </div>

                    <div class="form-group">
                        <label for="trackTitle">Track Title *</label>
                        <input type="text" id="trackTitle" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="artistName">Artist Name *</label>
                        <input type="text" id="artistName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="albumTitle">Album (leave empty for Single)</label>
                        <input type="text" id="albumTitle" class="form-control" placeholder="Single">
                    </div>

                    <div class="form-group">
                        <label for="genre">Genre *</label>
                        <select id="genre" class="form-control" required>
                            <option value="">Select a genre</option>
                            <option value="electronic">Electronic</option>
                            <option value="hiphop">Hip Hop</option>
                            <option value="rock">Rock</option>
                            <option value="pop">Pop</option>
                            <option value="jazz">Jazz</option>
                            <option value="classical">Classical</option>
                            <option value="rnb">R&B</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" class="form-control" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="terms" required>
                            I have the rights to upload this content and agree to the <a href="#" style="color: #00ffd0;">Terms of Service</a>.
                        </label>
                    </div>

                    <button type="submit" class="btn-upload">Upload Track</button>
                </form>
            </div>
        </main>
    </template>

    <template id="tpl-login">
        <main class="auth-main">
            <div class="login-container">
                <div class="login-header">
                    <h1 class="login-title">Welcome to Juke</h1>
                    <button class="login-close-btn" onclick="window.location.hash='#/feed'" aria-label="Close login">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username">Username or Email</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="login-btn">Log In</button>
                </form>
                <div class="signup-link">
                    Don't have an account? <a href="#/register">Sign up</a>
                </div>
            </div>
        </main>
    </template>

    <template id="tpl-register">
        <main class="auth-main">
            <div class="register-container">
                <div class="register-header">
                    <h1 class="register-title">Create Account</h1>
                    <button class="register-close-btn" onclick="window.location.hash='#/feed'" aria-label="Close register">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="social-buttons">
                    <button type="button" class="social-btn google">
                        <i class="fab fa-google"></i> Continue with Google
                    </button>
                    <button type="button" class="social-btn facebook">
                        <i class="fab fa-facebook-f"></i> Continue with Facebook
                    </button>
                    <button type="button" class="social-btn apple">
                        <i class="fab fa-apple"></i> Continue with Apple
                    </button>
                </div>

                <div class="divider">or</div>

                <form id="registerForm">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required minlength="3">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required minlength="8">
                        <div class="password-requirements">At least 8 characters</div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" name="confirm-password" required>
                    </div>
                    <button type="submit" class="register-btn">Create Account</button>
                </form>

                <div class="login-link">
                    Already have an account? <a href="#/login">Log in</a>
                </div>
            </div>
        </main>
    </template>

    <template id="tpl-profile">
        <main class="auth-main">
            <div class="profile-container">
                <div class="profile-header">
                    <h1 class="profile-title">Profile & Settings</h1>
                    <button class="profile-close-btn" onclick="window.location.hash='#/feed'" aria-label="Close profile">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="profile-subtitle">Signed in as <span class="username-display"></span></div>

                <div id="profileMessage" class="profile-message" style="display:none"></div>

                <form id="profileForm">
                    <div class="form-group">
                        <label for="profileEmail">Email</label>
                        <input type="email" id="profileEmail" name="profileEmail" disabled>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="profileFirstName">First Name</label>
                            <input type="text" id="profileFirstName" name="profileFirstName">
                        </div>
                        <div class="form-group">
                            <label for="profileLastName">Last Name</label>
                            <input type="text" id="profileLastName" name="profileLastName">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="profileBio">Bio</label>
                        <input type="text" id="profileBio" name="profileBio" placeholder="Tell us something about you">
                    </div>

                    <div class="form-group">
                        <label for="profileAvatar">Profile Picture</label>
                        <div class="avatar-upload-container">
                            <div class="avatar-preview" id="avatarPreview">
                                <img id="avatarPreviewImg" src="images/juke.png" alt="Profile Preview" class="avatar-preview-img">
                                <div class="avatar-preview-placeholder">
                                    <i class="fas fa-camera"></i>
                                    <span>Click to upload</span>
                                </div>
                            </div>
                            <input type="file" id="profileAvatarFile" name="profileAvatarFile" accept="image/*" style="display: none;">
                            <input type="url" id="profileAvatar" name="profileAvatar" placeholder="https://..." style="display: none;">
                            <button type="button" id="avatarUploadBtn" class="profile-btn secondary">Upload Picture</button>
                            <button type="button" id="avatarRemoveBtn" class="profile-btn secondary" style="display: none;">Remove Picture</button>
                        </div>
                    </div>

                    <button type="submit" class="profile-btn">Save Settings</button>
                </form>

                <button type="button" id="logoutBtn" class="profile-btn secondary">Log out</button>

                <div class="profile-section" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: #00ffd0; margin-bottom: 1rem; font-size: 1.1rem;">Subscription & Billing</h3>
                    <a href="subscription-plans.html" class="profile-btn premium" target="_blank" style="display: inline-flex; align-items: center; text-decoration: none; margin-bottom: 0.5rem;">
                        <i class="fas fa-crown" style="margin-right: 0.5rem;"></i>
                        _premium (Change Plan)
                    </a>
                    <a href="analytics-dashboard.html" class="profile-btn analytics" target="_blank" style="display: inline-flex; align-items: center; text-decoration: none; margin-bottom: 0.5rem;">
                        <i class="fas fa-chart-line" style="margin-right: 0.5rem;"></i>
                        _analytics (Dashboard)
                    </a>
                </div>

                <div class="profile-section" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: #00ffd0; margin-bottom: 1rem; font-size: 1.1rem;">Legal & Support</h3>
                    <a href="#/impressum" class="profile-btn legal" style="display: inline-flex; align-items: center; text-decoration: none; margin-bottom: 0.5rem;">
                        <i class="fas fa-balance-scale" style="margin-right: 0.5rem;"></i>
                        _legal (Impressum)
                    </a>
                    <button type="button" id="deleteProfileBtn" class="profile-btn danger" style="display: inline-flex; align-items: center; text-decoration: none; margin-bottom: 0.5rem;">
                        <i class="fas fa-trash-alt" style="margin-right: 0.5rem;"></i>
                        Delete Profile
                    </button>
                </div>
            </div>
        </main>
    </template>

    <main id="app"></main>

    <a href="#/login" class="floating-button">
        <img src="images/U-pink.png" alt="Juke Logo">
    </a>

    <!-- Mobile Header -->
    <div class="mobile-header">
        <a href="#/feed">
            <img src="images/juqe.png" alt="JUKE" class="mobile-logo">
        </a>
        <input type="text" class="mobile-search" placeholder="Search...">
        <button class="mobile-user-btn auth-login" onclick="window.location.hash='#/login'">_U</button>
        <button class="mobile-user-btn auth-user" style="display:none;" onclick="window.location.hash='#/profile'">_U</button>
    </div>

    <!-- Mobile Mini Player -->
    <div class="mobile-mini-player" id="mobileMiniPlayer">
        <div class="mini-progress" id="miniProgress"></div>
        <div class="mini-content">
            <img src="images/juke.png" alt="Cover" class="mini-cover" id="miniCover">
            <div class="mini-info">
                <p class="mini-title" id="miniTitle">Not Playing</p>
                <p class="mini-artist" id="miniArtist">-</p>
            </div>
            <div class="mini-controls">
                <button class="mini-btn mini-like" id="miniLike" aria-label="Like">
                    <i class="far fa-heart"></i>
                </button>
                <button class="mini-btn mini-play-btn" id="miniPlay" aria-label="Play">
                    <i class="fas fa-play"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="#/feed" class="mobile-nav-item" data-nav="feed">
                <i class="fas fa-home"></i>
                <span>_feed</span>
            </a>
            <a href="#/lists" class="mobile-nav-item" data-nav="lists">
                <i class="fas fa-list"></i>
                <span>_lists</span>
            </a>
            <a href="#/disqo" class="mobile-nav-item" data-nav="disqo">
                <i class="fas fa-compact-disc"></i>
                <span>_disqo</span>
            </a>
            <a href="#/upload" class="mobile-nav-item" data-nav="upload">
                <i class="fas fa-upload"></i>
                <span>_upload</span>
            </a>
            <a href="#/koleqtion" class="mobile-nav-item" data-nav="koleqtion">
                <i class="fas fa-folder"></i>
                <span>_koleqtion</span>
            </a>
        </div>
    </nav>

    <!-- Fullscreen Player -->
    <div class="fullscreen-player" id="fullscreenPlayer">
        <div class="fs-header">
            <button class="fs-close" id="fsClose"><i class="fas fa-chevron-down"></i></button>
            <div class="fs-title-small">Now Playing</div>
            <button class="fs-more"><i class="fas fa-ellipsis-h"></i></button>
        </div>
        <div class="fs-artwork">
            <img src="images/juke.png" alt="Album Art" class="fs-cover" id="fsCover">
        </div>
        <div class="fs-info">
            <h2 class="fs-track-title" id="fsTitle">Not Playing</h2>
            <p class="fs-track-artist" id="fsArtist">-</p>
        </div>
        <div class="fs-progress">
            <div class="fs-progress-bar" id="fsProgressBar">
                <div class="fs-progress-fill" id="fsProgressFill"></div>
            </div>
            <div class="fs-times">
                <span id="fsCurrentTime">0:00</span>
                <span id="fsDuration">0:00</span>
            </div>
        </div>
        <div class="fs-controls">
            <button class="fs-ctrl-btn" id="fsShuffle"><i class="fas fa-random"></i></button>
            <button class="fs-ctrl-btn fs-prev-btn" id="fsPrev"><i class="fas fa-step-backward"></i></button>
            <button class="fs-ctrl-btn fs-play-btn" id="fsPlay"><i class="fas fa-play"></i></button>
            <button class="fs-ctrl-btn fs-next-btn" id="fsNext"><i class="fas fa-step-forward"></i></button>
            <button class="fs-ctrl-btn" id="fsRepeat"><i class="fas fa-redo"></i></button>
        </div>
        <div class="fs-bottom">
            <button class="fs-bottom-btn" id="fsDevice"><i class="fas fa-mobile-alt"></i></button>
            <button class="fs-bottom-btn" id="fsShare"><i class="fas fa-share"></i></button>
            <button class="fs-bottom-btn" id="fsQueue"><i class="fas fa-bars"></i></button>
        </div>
    </div>

    <div class="music-player"></div>
</body>
</html>