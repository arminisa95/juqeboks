<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>JUKE SPA</title>

    <link rel="stylesheet" href="css/styles.css?v=20250111-FIX">
    <link rel="stylesheet" href="css/musicplayer.css?v=20250111-FIX">
    <link rel="stylesheet" href="css/feed.css?v=20250111-FIX">
    <link rel="stylesheet" href="css/koleqtion.css?v=20250111-FINAL">
    <link rel="stylesheet" href="css/lists.css?v=20250111-FIX">
    <link rel="stylesheet" href="css/upload.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/common.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script src="js/player.js?v=20250111-FIX" defer></script>
    <script src="js/auth.js?v=20250111-FIX" defer></script>
    <script src="js/api.js?v=20250111-FIX" defer></script>
    <script src="js/lists.js?v=20250111-FIX" defer></script>
    <script src="js/uploadPage.js?v=20250111-FIX" defer></script>
    <script src="js/spa.js?v=20250111-FIX" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:ital,opsz,wght@0,17..18,400..700;1,17..18,400..700&family=Honk:MORF@15&family=Kedebideri:wght@400;500;600;700;800;900&family=Sigmar&display=swap" rel="stylesheet">
</head>
<body data-spa="true">
    <header>
        <a href="#/feed">
            <img src="images/juqe.png" alt="Juke Logo" class="logo-img">
        </a>

        <nav>
            <div class="nav-buttons">
                <a href="#/feed" class="feed">_feed</a>
                <a href="#/lists" class="artists">_lists</a>
                <a href="#/disqo" class="lists">_disqo</a>
            </div>
            <div class="search-container">
                <input type="text" class="search-bar" placeholder="Search for music, artists...">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>
            <div class="header-right">
                <div class="nav-buttons">
                    <a href="#/upload" class="app">_uqload</a>
                    <a href="#/koleqtion" class="register">_koleqtion</a>
                    <a href="#/login" class="login auth-login">_U</a>
                    <a href="#/profile" class="login auth-user">_U</a>
                    <a href="#" class="login auth-user" onclick="logout()">Logout</a>
                </div>
            </div>
        </nav>
    </header>

    <template id="tpl-disqo">
        <section class="music-feed">
            <div class="feed-container">
                <h2 class="feed-title">Disqo</h2>
                <div class="music-grid"></div>
            </div>
        </section>
    </template>

    <template id="tpl-koleqtion">
        <main>
            <div class="library-container">
                <aside class="library-nav" aria-label="Library directories">
                    <div class="library-nav-title">_koleqtion</div>
                    <div class="library-nav-subtitle">Your Library</div>
                    <div class="library-nav-items" role="tablist">
                        <button class="library-nav-item active" type="button" role="tab" data-view="tracks">_tracks</button>
                        <button class="library-nav-item" type="button" role="tab" data-view="playlists">_playlists</button>
                        <button class="library-nav-item" type="button" role="tab" data-view="albums">_albums</button>
                    </div>
                    <div class="library-nav-footer">Switch with ↑/↓, open with Enter</div>
                </aside>

                <section class="library-content" aria-label="Library content">
                    <div class="library-panel active" id="libraryPanelTracks" data-panel="tracks" role="tabpanel">
                        <div class="library-panel-header">
                            <div class="library-panel-title">_tracks</div>
                            <div class="library-panel-hint">Your tracks</div>
                        </div>
                        <div class="tracks-grid" id="tracksGrid"></div>
                    </div>

                    <div class="library-panel" id="libraryPanelPlaylists" data-panel="playlists" role="tabpanel">
                        <div class="library-panel-header">
                            <div class="library-panel-title">_playlists</div>
                            <div class="library-panel-hint">Your playlists</div>
                        </div>
                        <div class="tracks-grid" id="playlistsGrid"></div>
                    </div>

                    <div class="library-panel" id="libraryPanelAlbums" data-panel="albums" role="tabpanel">
                        <div class="library-panel-header">
                            <div class="library-panel-title">_albums</div>
                            <div class="library-panel-hint">Your albums</div>
                        </div>
                        <div class="tracks-grid" id="albumsGrid"></div>
                    </div>
                </section>
            </div>
        </main>
    </template>

    <template id="tpl-login">
        <main class="auth-main">
            <div class="login-container">
                <h1 class="login-title">Welcome to Juke</h1>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username">Username or Email</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="login-btn">Log In</button>
                </form>
                <div class="signup-link">
                    Don't have an account? <a href="#/register">Sign up</a>
                </div>
            </div>
        </main>
    </template>

    <template id="tpl-register">
        <main class="auth-main">
            <div class="register-container">
                <h1 class="register-title">Create Account</h1>

                <div class="social-buttons">
                    <button type="button" class="social-btn google">
                        <i class="fab fa-google"></i> Continue with Google
                    </button>
                    <button type="button" class="social-btn facebook">
                        <i class="fab fa-facebook-f"></i> Continue with Facebook
                    </button>
                    <button type="button" class="social-btn apple">
                        <i class="fab fa-apple"></i> Continue with Apple
                    </button>
                </div>

                <div class="divider">or</div>

                <form id="registerForm">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required minlength="3">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required minlength="8">
                        <div class="password-requirements">At least 8 characters</div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" name="confirm-password" required>
                    </div>
                    <button type="submit" class="register-btn">Create Account</button>
                </form>

                <div class="login-link">
                    Already have an account? <a href="#/login">Log in</a>
                </div>
            </div>
        </main>
    </template>

    <template id="tpl-profile">
        <main class="auth-main">
            <div class="profile-container">
                <h1 class="profile-title">Profile & Settings</h1>

                <div class="profile-subtitle">Signed in as <span class="username-display"></span></div>

                <div id="profileMessage" class="profile-message"></div>

                <form id="profileForm">
                    <div class="form-group">
                        <label for="profileUsername">Username</label>
                        <input type="text" id="profileUsername" name="profileUsername" required>
                    </div>

                    <div class="form-group">
                        <label for="profileEmail">Email</label>
                        <input type="email" id="profileEmail" name="profileEmail" disabled>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="profileFirstName">First Name</label>
                            <input type="text" id="profileFirstName" name="profileFirstName">
                        </div>
                        <div class="form-group">
                            <label for="profileLastName">Last Name</label>
                            <input type="text" id="profileLastName" name="profileLastName">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="profileBio">Bio</label>
                        <input type="text" id="profileBio" name="profileBio" placeholder="Tell us something about you">
                    </div>

                    <div class="profile-section" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                        <h3 style="color: #00ffd0; margin-bottom: 1rem; font-size: 1.1rem;">Change Password</h3>
                        
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" name="currentPassword" placeholder="Enter current password">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="newPassword">New Password</label>
                                <input type="password" id="newPassword" name="newPassword" placeholder="Enter new password" minlength="8">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm New Password</label>
                                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm new password" minlength="8">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="profileAvatar">Avatar URL</label>
                        <input type="url" id="profileAvatar" name="profileAvatar" placeholder="https://...">
                    </div>

                    <button type="submit" class="profile-btn">Save Settings</button>
                </form>

                <button type="button" id="logoutBtn" class="profile-btn secondary">Log out</button>
            </div>
        </main>
    </template>

    <main id="app"></main>

    <div class="music-player"></div>
</body>
</html>
